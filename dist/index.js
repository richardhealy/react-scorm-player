/*! For license information please see index.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.ReactScormPlayer=t(require("react")):e.ReactScormPlayer=t(e.react)}(self,(e=>(()=>{var t={343:function(e,t){var r,i,n;!function(){"use strict";i=[],void 0===(n="function"==typeof(r=function(e){return function(t){(t=t||{}).arrayAccessForm=t.arrayAccessForm||"none",t.emptyNodeForm=t.emptyNodeForm||"text",t.jsAttributeFilter=t.jsAttributeFilter,t.jsAttributeConverter=t.jsAttributeConverter,t.attributeConverters=t.attributeConverters||[],t.datetimeAccessFormPaths=t.datetimeAccessFormPaths||[],t.arrayAccessFormPaths=t.arrayAccessFormPaths||[],t.xmldomOptions=t.xmldomOptions||{},void 0===t.enableToStringFunc&&(t.enableToStringFunc=!0),void 0===t.skipEmptyTextNodesForObj&&(t.skipEmptyTextNodesForObj=!0),void 0===t.stripWhitespaces&&(t.stripWhitespaces=!0),void 0===t.useDoubleQuotes&&(t.useDoubleQuotes=!0),void 0===t.ignoreRoot&&(t.ignoreRoot=!1),void 0===t.escapeMode&&(t.escapeMode=!0),void 0===t.attributePrefix&&(t.attributePrefix="_"),void 0===t.selfClosingElements&&(t.selfClosingElements=!0),void 0===t.keepCData&&(t.keepCData=!1),void 0===t.keepText&&(t.keepText=!1),void 0===t.jsDateUTC&&(t.jsDateUTC=!1),function(){function e(e){var t=String(e);return 1===t.length&&(t="0"+t),t}"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|^\n+|(\s|\n)+$/g,"")}),"function"!=typeof Date.prototype.toISOString&&(Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"})}();var r=1,i=3,n=4,o=8,s=9;function a(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!==t||(t=e.nodeName),t}function c(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"):e}function l(e,r,i){if("property"===t.arrayAccessForm&&(e[r]instanceof Array?e[r+"_asArray"]=e[r]:e[r+"_asArray"]=[e[r]]),!(e[r]instanceof Array)&&t.arrayAccessFormPaths.length>0){for(var n=!1,o=0;o<t.arrayAccessFormPaths.length;o++){var s=t.arrayAccessFormPaths[o];if("string"==typeof s){if(s===i){n=!0;break}}else if(s instanceof RegExp){if(s.test(i)){n=!0;break}}else if("function"==typeof s&&s(r,i)){n=!0;break}}n&&(e[r]=[e[r]])}}function u(e){var t=e.split(/[-T:+Z]/g),r=new Date(t[0],t[1]-1,t[2]),i=t[5].split(".");if(r.setHours(t[3],t[4],i[0]),i.length>1&&r.setMilliseconds(i[1]),t[6]&&t[7]){var n=60*t[6]+Number(t[7]);n=0+("-"==(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*n:n),r.setMinutes(r.getMinutes()-n-r.getTimezoneOffset())}else-1!==e.indexOf("Z",e.length-1)&&(r=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds())));return r}function h(e,r){for(var i={__cnt:0},n=e.childNodes,s=0;s<n.length;s++){var c=n.item(s),h=a(c);c.nodeType!==o&&(i.__cnt++,null==i[h]?(i[h]=d(c,r+"."+h),l(i,h,r+"."+h)):(i[h]instanceof Array||(i[h]=[i[h]],l(i,h,r+"."+h)),i[h][i[h].length]=d(c,r+"."+h)))}for(var m=0;m<e.attributes.length;m++){var _=e.attributes.item(m);i.__cnt++;for(var f=_.value,p=0;p<t.attributeConverters.length;p++){var g=t.attributeConverters[p];g.test.call(null,_.name,_.value)&&(f=g.convert.call(null,_.name,_.value))}i[t.attributePrefix+_.name]=f}var E=e.prefix;return E&&(i.__cnt++,i.__prefix=E),i["#text"]&&(i.__text=i["#text"],i.__text instanceof Array&&(i.__text=i.__text.join("\n")),t.escapeMode&&(i.__text=i.__text.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&amp;/g,"&")),t.stripWhitespaces&&(i.__text=i.__text.trim()),delete i["#text"],"property"===t.arrayAccessForm&&delete i["#text_asArray"],i.__text=function(e,r,i){if(t.datetimeAccessFormPaths.length>0)for(var n=i.split(".#")[0],o=0;o<t.datetimeAccessFormPaths.length;o++){var s=t.datetimeAccessFormPaths[o];if("string"==typeof s){if(s===n)return u(e)}else if(s instanceof RegExp){if(s.test(n))return u(e)}else if("function"==typeof s&&s(n))return u(e)}return e}(i.__text,0,r+".#text")),i.hasOwnProperty("#cdata-section")&&(i.__cdata=i["#cdata-section"],delete i["#cdata-section"],"property"===t.arrayAccessForm&&delete i["#cdata-section_asArray"]),1===i.__cnt&&i.__text&&!t.keepText?i=i.__text:0===i.__cnt&&"text"===t.emptyNodeForm?i="":i.__cnt>1&&void 0!==i.__text&&t.skipEmptyTextNodesForObj&&(t.stripWhitespaces&&""===i.__text||""===i.__text.trim())&&delete i.__text,delete i.__cnt,t.keepCData||i.hasOwnProperty("__text")||!i.hasOwnProperty("__cdata")||1!==Object.keys(i).length?(t.enableToStringFunc&&(i.__text||i.__cdata)&&(i.toString=function(){return(this.__text?this.__text:"")+(this.__cdata?this.__cdata:"")}),i):i.__cdata?i.__cdata:""}function d(e,o){return e.nodeType===s?function(e){for(var i={},n=e.childNodes,o=0;o<n.length;o++){var s=n.item(o);if(s.nodeType===r){var c=a(s);t.ignoreRoot?i=d(s,c):i[c]=d(s,c)}}return i}(e):e.nodeType===r?h(e,o):e.nodeType===i||e.nodeType===n?e.nodeValue:null}function m(e,r,i,n){var o="<"+(e&&e.__prefix?e.__prefix+":":"")+r;if(i)for(var s=0;s<i.length;s++){var a=i[s],l=e[a];t.escapeMode&&(l=c(l)),o+=" "+a.substr(t.attributePrefix.length)+"=",t.useDoubleQuotes?o+='"'+l+'"':o+="'"+l+"'"}return o+(n?" />":">")}function _(e,t){return"</"+(e&&e.__prefix?e.__prefix+":":"")+t+">"}function f(e,r){return!!("property"===t.arrayAccessForm&&(i=r.toString(),n="_asArray",-1!==i.indexOf(n,i.length-n.length))||0===r.toString().indexOf(t.attributePrefix)||0===r.toString().indexOf("__")||e[r]instanceof Function);var i,n}function p(e){var t=0;if(e instanceof Object)for(var r in e)f(e,r)||t++;return t}function g(e){var r=[];if(e instanceof Object)for(var i in e)-1===i.toString().indexOf("__")&&0===i.toString().indexOf(t.attributePrefix)&&r.push(i);return r}function E(e){var r="";return e instanceof Object?r+=function(e){var r="";return e.__cdata&&(r+="<![CDATA["+e.__cdata+"]]>"),(e.__text||"number"==typeof e.__text||"boolean"==typeof e.__text)&&(t.escapeMode?r+=c(e.__text):r+=e.__text),r}(e):null!==e&&(t.escapeMode?r+=c(e):r+=e),r}function y(e,r,i){var n="";return t.jsAttributeFilter&&t.jsAttributeFilter.call(null,r,e)||(t.jsAttributeConverter&&(e=t.jsAttributeConverter.call(null,r,e)),null!=e&&""!==e||!t.selfClosingElements?"object"==typeof e?"[object Array]"===Object.prototype.toString.call(e)?n+=function(e,t,r){var i="";if(0===e.length)i+=m(e,t,r,!0);else for(var n=0;n<e.length;n++)i+=y(e[n],t,g(e[n]));return i}(e,r,i):e instanceof Date?(n+=m(e,r,i,!1),n+=t.jsDateUTC?e.toUTCString():e.toISOString(),n+=_(e,r)):p(e)>0||"number"==typeof e.__text||"boolean"==typeof e.__text||e.__text||e.__cdata?(n+=m(e,r,i,!1),n+=b(e),n+=_(e,r)):t.selfClosingElements?n+=m(e,r,i,!0):(n+=m(e,r,i,!1),n+=_(e,r)):(n+=m(e,r,i,!1),n+=E(e),n+=_(e,r)):n+=m(e,r,i,!0)),n}function b(e){var t="";if(p(e)>0)for(var r in e)if(!f(e,r)){var i=e[r];t+=y(i,r,g(i))}return t+E(e)}function v(r){if(void 0===r)return null;if("string"!=typeof r)return null;var i=null,n=null;if(e)n=(i=new e(t.xmldomOptions)).parseFromString(r,"text/xml");else if(window&&window.DOMParser){i=new window.DOMParser;var o=null;if(!window.ActiveXObject&&!("ActiveXObject"in window)&&document.all&&!document.addEventListener)try{o=i.parseFromString("INVALID","text/xml").childNodes[0].namespaceURI}catch(e){o=null}try{n=i.parseFromString(r,"text/xml"),null!==o&&n.getElementsByTagNameNS(o,"parsererror").length>0&&(n=null)}catch(e){n=null}}else 0===r.indexOf("<?")&&(r=r.substr(r.indexOf("?>")+2)),(n=new ActiveXObject("Microsoft.XMLDOM")).async="false",n.loadXML(r);return n}this.asArray=function(e){return null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?u(e):e},this.xml2dom=function(e){return v(e)},this.dom2js=function(e){return d(e,null)},this.js2dom=function(e){return v(this.js2xml(e))},this.xml2js=function(e){var t=v(e);return null!=t?this.dom2js(t):null},this.js2xml=function(e){return b(e)},this.getVersion=function(){return"3.4.4"}}})?r.apply(t,i):r)||(e.exports=n)}()},155:t=>{"use strict";t.exports=e}},r={};function i(e){var n=r[e];if(void 0!==n)return n.exports;var o=r[e]={exports:{}};return t[e].call(o.exports,o,o.exports,i),o.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{"use strict";i.r(n),i.d(n,{ReactScormPlayer:()=>E,default:()=>y});var e=i(343),t=i.n(e);!function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};function t(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}var r=function(){return r=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},r.apply(this,arguments)};function i(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))}function n(e,t){var r,i,n,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(r=1,i&&(n=2&a[0]?i.return:a[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,a[1])).done)return n;switch(i=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((n=(n=o.trys).length>0&&n[n.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){o.label=a[1];break}if(6===a[0]&&o.label<n[1]){o.label=n[1],n=a;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(a);break}n[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],i=0}finally{r=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var o,s=function(){function e(){this.jsonString=!1,this._initialized=!1}return Object.defineProperty(e.prototype,"initialized",{get:function(){return this._initialized},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"start_time",{get:function(){return this._start_time},enumerable:!1,configurable:!0}),e.prototype.initialize=function(){this._initialized=!0},e.prototype.setStartTime=function(){this._start_time=(new Date).getTime()},e}(),a=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t(r,e),r}(s),c={GENERAL:101,INITIALIZATION_FAILED:101,INITIALIZED:101,TERMINATED:101,TERMINATION_FAILURE:101,TERMINATION_BEFORE_INIT:101,MULTIPLE_TERMINATION:101,RETRIEVE_BEFORE_INIT:101,RETRIEVE_AFTER_TERM:101,STORE_BEFORE_INIT:101,STORE_AFTER_TERM:101,COMMIT_BEFORE_INIT:101,COMMIT_AFTER_TERM:101,ARGUMENT_ERROR:101,CHILDREN_ERROR:101,COUNT_ERROR:101,GENERAL_GET_FAILURE:101,GENERAL_SET_FAILURE:101,GENERAL_COMMIT_FAILURE:101,UNDEFINED_DATA_MODEL:101,UNIMPLEMENTED_ELEMENT:101,VALUE_NOT_INITIALIZED:101,INVALID_SET_VALUE:101,READ_ONLY_ELEMENT:101,WRITE_ONLY_ELEMENT:101,TYPE_MISMATCH:101,VALUE_OUT_OF_RANGE:101,DEPENDENCY_NOT_ESTABLISHED:101},l={scorm12:r(r({},c),{RETRIEVE_BEFORE_INIT:301,STORE_BEFORE_INIT:301,COMMIT_BEFORE_INIT:301,ARGUMENT_ERROR:201,CHILDREN_ERROR:202,COUNT_ERROR:203,UNDEFINED_DATA_MODEL:401,UNIMPLEMENTED_ELEMENT:401,VALUE_NOT_INITIALIZED:301,INVALID_SET_VALUE:402,READ_ONLY_ELEMENT:403,WRITE_ONLY_ELEMENT:404,TYPE_MISMATCH:405,VALUE_OUT_OF_RANGE:407,DEPENDENCY_NOT_ESTABLISHED:408}),scorm2004:r(r({},c),{INITIALIZATION_FAILED:102,INITIALIZED:103,TERMINATED:104,TERMINATION_FAILURE:111,TERMINATION_BEFORE_INIT:112,MULTIPLE_TERMINATIONS:113,RETRIEVE_BEFORE_INIT:122,RETRIEVE_AFTER_TERM:123,STORE_BEFORE_INIT:132,STORE_AFTER_TERM:133,COMMIT_BEFORE_INIT:142,COMMIT_AFTER_TERM:143,ARGUMENT_ERROR:201,GENERAL_GET_FAILURE:301,GENERAL_SET_FAILURE:351,GENERAL_COMMIT_FAILURE:391,UNDEFINED_DATA_MODEL:401,UNIMPLEMENTED_ELEMENT:402,VALUE_NOT_INITIALIZED:403,READ_ONLY_ELEMENT:404,WRITE_ONLY_ELEMENT:405,TYPE_MISMATCH:406,VALUE_OUT_OF_RANGE:407,DEPENDENCY_NOT_ESTABLISHED:408})},u={cmi_children:"core,suspend_data,launch_data,comments,objectives,student_data,student_preference,interactions",core_children:"student_id,student_name,lesson_location,credit,lesson_status,entry,score,total_time,lesson_mode,exit,session_time",score_children:"raw,min,max",comments_children:"content,location,time",objectives_children:"id,score,status",correct_responses_children:"pattern",student_data_children:"mastery_score,max_time_allowed,time_limit_action",student_preference_children:"audio,language,speed,text",interactions_children:"id,objectives,time,type,correct_responses,weighting,student_response,result,latency",error_descriptions:{101:{basicMessage:"General Exception",detailMessage:"No specific error code exists to describe the error. Use LMSGetDiagnostic for more information"},201:{basicMessage:"Invalid argument error",detailMessage:"Indicates that an argument represents an invalid data model element or is otherwise incorrect."},202:{basicMessage:"Element cannot have children",detailMessage:'Indicates that LMSGetValue was called with a data model element name that ends in "_children" for a data model element that does not support the "_children" suffix.'},203:{basicMessage:"Element not an array - cannot have count",detailMessage:'Indicates that LMSGetValue was called with a data model element name that ends in "_count" for a data model element that does not support the "_count" suffix.'},301:{basicMessage:"Not initialized",detailMessage:"Indicates that an API call was made before the call to lmsInitialize."},401:{basicMessage:"Not implemented error",detailMessage:"The data model element indicated in a call to LMSGetValue or LMSSetValue is valid, but was not implemented by this LMS. SCORM 1.2 defines a set of data model elements as being optional for an LMS to implement."},402:{basicMessage:"Invalid set value, element is a keyword",detailMessage:'Indicates that LMSSetValue was called on a data model element that represents a keyword (elements that end in "_children" and "_count").'},403:{basicMessage:"Element is read only",detailMessage:"LMSSetValue was called with a data model element that can only be read."},404:{basicMessage:"Element is write only",detailMessage:"LMSGetValue was called on a data model element that can only be written to."},405:{basicMessage:"Incorrect Data Type",detailMessage:"LMSSetValue was called with a value that is not consistent with the data format of the supplied data model element."},407:{basicMessage:"Element Value Out Of Range",detailMessage:"The numeric value supplied to a LMSSetValue call is outside of the numeric range allowed for the supplied data model element."},408:{basicMessage:"Data Model Dependency Not Established",detailMessage:"Some data model elements cannot be set until another data model element was set. This error condition indicates that the prerequisite element was not set before the dependent element."}}},h={global:{SCORM_TRUE:"true",SCORM_FALSE:"false",STATE_NOT_INITIALIZED:0,STATE_INITIALIZED:1,STATE_TERMINATED:2,LOG_LEVEL_DEBUG:1,LOG_LEVEL_INFO:2,LOG_LEVEL_WARNING:3,LOG_LEVEL_ERROR:4,LOG_LEVEL_NONE:5},scorm12:u,aicc:r(r({},u),{cmi_children:"core,suspend_data,launch_data,comments,objectives,student_data,student_preference,interactions,evaluation",student_preference_children:"audio,language,lesson_type,speed,text,text_color,text_location,text_size,video,windows",student_data_children:"attempt_number,tries,mastery_score,max_time_allowed,time_limit_action",student_demographics_children:"city,class,company,country,experience,familiar_name,instructor_name,title,native_language,state,street_address,telephone,years_experience",tries_children:"time,status,score",attempt_records_children:"score,lesson_status",paths_children:"location_id,date,time,status,why_left,time_in_element"}),scorm2004:{cmi_children:"_version,comments_from_learner,comments_from_lms,completion_status,credit,entry,exit,interactions,launch_data,learner_id,learner_name,learner_preference,location,max_time_allowed,mode,objectives,progress_measure,scaled_passing_score,score,session_time,success_status,suspend_data,time_limit_action,total_time",comments_children:"comment,timestamp,location",score_children:"max,raw,scaled,min",objectives_children:"progress_measure,completion_status,success_status,description,score,id",correct_responses_children:"pattern",student_data_children:"mastery_score,max_time_allowed,time_limit_action",student_preference_children:"audio_level,audio_captioning,delivery_speed,language",interactions_children:"id,type,objectives,timestamp,correct_responses,weighting,learner_response,result,latency,description",error_descriptions:{0:{basicMessage:"No Error",detailMessage:"No error occurred, the previous API call was successful."},101:{basicMessage:"General Exception",detailMessage:"No specific error code exists to describe the error. Use GetDiagnostic for more information."},102:{basicMessage:"General Initialization Failure",detailMessage:"Call to Initialize failed for an unknown reason."},103:{basicMessage:"Already Initialized",detailMessage:"Call to Initialize failed because Initialize was already called."},104:{basicMessage:"Content Instance Terminated",detailMessage:"Call to Initialize failed because Terminate was already called."},111:{basicMessage:"General Termination Failure",detailMessage:"Call to Terminate failed for an unknown reason."},112:{basicMessage:"Termination Before Initialization",detailMessage:"Call to Terminate failed because it was made before the call to Initialize."},113:{basicMessage:"Termination After Termination",detailMessage:"Call to Terminate failed because Terminate was already called."},122:{basicMessage:"Retrieve Data Before Initialization",detailMessage:"Call to GetValue failed because it was made before the call to Initialize."},123:{basicMessage:"Retrieve Data After Termination",detailMessage:"Call to GetValue failed because it was made after the call to Terminate."},132:{basicMessage:"Store Data Before Initialization",detailMessage:"Call to SetValue failed because it was made before the call to Initialize."},133:{basicMessage:"Store Data After Termination",detailMessage:"Call to SetValue failed because it was made after the call to Terminate."},142:{basicMessage:"Commit Before Initialization",detailMessage:"Call to Commit failed because it was made before the call to Initialize."},143:{basicMessage:"Commit After Termination",detailMessage:"Call to Commit failed because it was made after the call to Terminate."},201:{basicMessage:"General Argument Error",detailMessage:"An invalid argument was passed to an API method (usually indicates that Initialize, Commit or Terminate did not receive the expected empty string argument."},301:{basicMessage:"General Get Failure",detailMessage:"Indicates a failed GetValue call where no other specific error code is applicable. Use GetDiagnostic for more information."},351:{basicMessage:"General Set Failure",detailMessage:"Indicates a failed SetValue call where no other specific error code is applicable. Use GetDiagnostic for more information."},391:{basicMessage:"General Commit Failure",detailMessage:"Indicates a failed Commit call where no other specific error code is applicable. Use GetDiagnostic for more information."},401:{basicMessage:"Undefined Data Model Element",detailMessage:"The data model element name passed to GetValue or SetValue is not a valid SCORM data model element."},402:{basicMessage:"Unimplemented Data Model Element",detailMessage:"The data model element indicated in a call to GetValue or SetValue is valid, but was not implemented by this LMS. In SCORM 2004, this error would indicate an LMS that is not fully SCORM conformant."},403:{basicMessage:"Data Model Element Value Not Initialized",detailMessage:"Attempt to read a data model element that has not been initialized by the LMS or through a SetValue call. This error condition is often reached during normal execution of a SCO."},404:{basicMessage:"Data Model Element Is Read Only",detailMessage:"SetValue was called with a data model element that can only be read."},405:{basicMessage:"Data Model Element Is Write Only",detailMessage:"GetValue was called on a data model element that can only be written to."},406:{basicMessage:"Data Model Element Type Mismatch",detailMessage:"SetValue was called with a value that is not consistent with the data format of the supplied data model element."},407:{basicMessage:"Data Model Element Value Out Of Range",detailMessage:"The numeric value supplied to a SetValue call is outside of the numeric range allowed for the supplied data model element."},408:{basicMessage:"Data Model Dependency Not Established",detailMessage:"Some data model elements cannot be set until another data model element was set. This error condition indicates that the prerequisite element was not set before the dependent element."}}}},d=h.scorm12.error_descriptions,m=h.aicc.error_descriptions,_=h.scorm2004.error_descriptions,f=function(e){function r(t){var r=e.call(this,t.toString())||this;return r._errorCode=t,r.name="ScormValidationError",r}return t(r,e),Object.defineProperty(r.prototype,"errorCode",{get:function(){return this._errorCode},enumerable:!1,configurable:!0}),r.prototype.setMessage=function(e){this.message=e},r}(Error),p=function(e){function r(t,r,i){var n=e.call(this,t)||this;return n._detailedMessage="",n.setMessage(r),n._errorMessage=r,i&&(n._detailedMessage=i),n}return t(r,e),Object.defineProperty(r.prototype,"errorMessage",{get:function(){return this._errorMessage},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"detailedMessage",{get:function(){return this._detailedMessage},enumerable:!1,configurable:!0}),r}(f),g=(t((function(e){return{}.hasOwnProperty.call(d,String(e))?o.call(this,e,d[String(e)].basicMessage,d[String(e)].detailMessage)||this:o.call(this,101,d[101].basicMessage,d[101].detailMessage)||this}),o=p),function(e){t((function(t){return{}.hasOwnProperty.call(m,String(t))?e.call(this,t,m[String(t)].basicMessage,m[String(t)].detailMessage)||this:e.call(this,101,m[101].basicMessage,m[101].detailMessage)||this}),e)}(p),function(e){function r(t){return{}.hasOwnProperty.call(_,String(t))?e.call(this,t,_[String(t)].basicMessage,_[String(t)].detailMessage)||this:e.call(this,101,_[101].basicMessage,_[101].detailMessage)||this}return t(r,e),r}(p)),E=l.scorm12,y=function(e){function r(t){var r=e.call(this)||this;return r.__children=t.children,r._errorCode=t.errorCode||E.GENERAL,r._errorClass=t.errorClass||f,r.childArray=[],r}return t(r,e),Object.defineProperty(r.prototype,"_children",{get:function(){return this.__children},set:function(e){throw new this._errorClass(this._errorCode)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"_count",{get:function(){return this.childArray.length},set:function(e){throw new this._errorClass(this._errorCode)},enumerable:!1,configurable:!0}),r.prototype.toJSON=function(){this.jsonString=!0;for(var e={},t=0;t<this.childArray.length;t++)e[t+""]=this.childArray[t];return delete this.jsonString,e},r}(s),b={D:86400,H:3600,M:60,S:1};function v(e){if(!e||e<=0)return"PT0S";var t,r="P",i=e;for(var n in b){var o=b[n],s=Math.floor(i/o);t=i%=o,(Math.floor(t)===t||String(t).indexOf(".")<0?0:t.toString().split(".")[1].length||0)>2&&(i=Number(Number(i).toFixed(2))),"S"===n&&i>0&&(s+=i),s&&((r.indexOf("D")>0||"H"===n||"M"===n||"S"===n)&&-1===r.indexOf("T")&&(r+="T"),r+="".concat(s).concat(n))}return r}function M(e,t){if("string"==typeof t&&(t=new RegExp(t)),!e||!e.match(t))return 0;var r=new RegExp(t).exec(e)||[],i=r[1],n=(r[2],r[4]),o=r[5],s=r[6],a=r[7],c=0;return c+=Number(a)||0,c+=60*Number(s)||0,c+=3600*Number(o)||0,(c+=86400*Number(n)||0)+(31536e3*Number(i)||0)}function S(e){var t={};return function e(r,i){if(Object(r)!==r)t[i]=r;else if(Array.isArray(r))for(var n=0,o=r.length;n<o;n++)e(r[n],i+"["+n+"]"),0===o&&(t[i]=[]);else{var s=!0;for(var a in r)({}).hasOwnProperty.call(r,a)&&(s=!1,e(r[a],i?i+"."+a:a));s&&i&&(t[i]={})}}(e,""),t}function I(e,t){return null!==(null==e?void 0:e.match(t))}var O={autocommit:!1,autocommitSeconds:10,asyncCommit:!1,sendFullCommit:!0,lmsCommitUrl:!1,dataCommitFormat:"json",commitRequestDataType:"application/json;charset=UTF-8",autoProgress:!1,logLevel:h.global.LOG_LEVEL_ERROR,selfReportSessionTime:!1,alwaysSendTotalTime:!1,renderCommonCommitFields:!1,strict_errors:!0,xhrHeaders:{},xhrWithCredentials:!1,responseHandler:function(e){return i(this,void 0,void 0,(function(){var t,r,i;return n(this,(function(n){switch(n.label){case 0:return void 0===e?[3,2]:(i=(r=JSON).parse,[4,e.text()]);case 1:return null!==(t=i.apply(r,[n.sent()]))&&{}.hasOwnProperty.call(t,"result")?[2,{result:t.result,errorCode:t.errorCode?t.errorCode:t.result===h.global.SCORM_TRUE?0:101}]:200===e.status?[2,{result:h.global.SCORM_TRUE,errorCode:0}]:[2,{result:h.global.SCORM_FALSE,errorCode:101}];case 2:return[2,{result:h.global.SCORM_FALSE,errorCode:101}]}}))}))},requestHandler:function(e){return e},onLogMessage:function(e,t){switch(e){case h.global.LOG_LEVEL_ERROR:console.error(t);break;case h.global.LOG_LEVEL_WARNING:console.warn(t);break;case h.global.LOG_LEVEL_INFO:console.info(t);break;case h.global.LOG_LEVEL_DEBUG:console.debug?console.debug(t):console.log(t)}},scoItemIds:[],scoItemIdValidator:!1},T=function(){function e(e,t,r){this._cancelled=!1,this._API=e,this._timeout=setTimeout(this.wrapper.bind(this),t),this._callback=r}return e.prototype.cancel=function(){this._cancelled=!0,this._timeout&&clearTimeout(this._timeout)},e.prototype.wrapper=function(){this._cancelled||i(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return[4,this._API.commit(this._callback)];case 1:return[2,e.sent()]}}))}))},e}(),w=function(){function e(t,r){var i=this.constructor;if(this._settings=O,i===e)throw new TypeError("Cannot construct BaseAPI instances directly");this.currentState=h.global.STATE_NOT_INITIALIZED,this.lastErrorCode="0",this.listenerArray=[],this._error_codes=t,r&&(this.settings=r),this.apiLogLevel=this.settings.logLevel,this.selfReportSessionTime=this.settings.selfReportSessionTime}return e.prototype.commonReset=function(e){this.settings=r(r({},this.settings),e),this.currentState=h.global.STATE_NOT_INITIALIZED,this.lastErrorCode="0",this.listenerArray=[]},e.prototype.initialize=function(e,t,r){var i=h.global.SCORM_FALSE;return this.isInitialized()?this.throwSCORMError(this._error_codes.INITIALIZED,t):this.isTerminated()?this.throwSCORMError(this._error_codes.TERMINATED,r):(this.selfReportSessionTime&&this.cmi.setStartTime(),this.currentState=h.global.STATE_INITIALIZED,this.lastErrorCode="0",i=h.global.SCORM_TRUE,this.processListeners(e)),this.apiLog(e,"returned: "+i,h.global.LOG_LEVEL_INFO),this.clearSCORMError(i),i},e.prototype.apiLog=function(e,t,r,i){t=function(e,t,r){for(var i="",n=20-(i+=e).length,o=0;o<n;o++)i+=" ";if(i+=": ",r){n=70-(i+=r).length;for(var s=0;s<n;s++)i+=" "}return t&&(i+=t),i}(e,t,i),r>=this.apiLogLevel&&this.settings.onLogMessage(r,t)},Object.defineProperty(e.prototype,"error_codes",{get:function(){return this._error_codes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"settings",{get:function(){return this._settings},set:function(e){this._settings=r(r({},this._settings),e)},enumerable:!1,configurable:!0}),e.prototype.terminate=function(e,t){return i(this,void 0,void 0,(function(){var r,i;return n(this,(function(n){switch(n.label){case 0:return r=h.global.SCORM_FALSE,this.checkState(t,this._error_codes.TERMINATION_BEFORE_INIT,this._error_codes.MULTIPLE_TERMINATION)?(this.currentState=h.global.STATE_TERMINATED,[4,this.storeData(!0)]):[3,2];case 1:void 0!==(i=n.sent()).errorCode&&i.errorCode>0&&this.throwSCORMError(i.errorCode),r=void 0!==i&&i.result?i.result:h.global.SCORM_FALSE,t&&(this.lastErrorCode="0"),r=h.global.SCORM_TRUE,this.processListeners(e),n.label=2;case 2:return this.apiLog(e,"returned: "+r,h.global.LOG_LEVEL_INFO),this.clearSCORMError(r),[2,r]}}))}))},e.prototype.getValue=function(e,t,r){var i="";if(this.checkState(t,this._error_codes.RETRIEVE_BEFORE_INIT,this._error_codes.RETRIEVE_AFTER_TERM)){t&&(this.lastErrorCode="0");try{i=this.getCMIValue(r)}catch(e){i=this.handleValueAccessException(e,i)}this.processListeners(e,r)}return this.apiLog(e,": returned: "+i,h.global.LOG_LEVEL_INFO,r),void 0===i?"":(this.clearSCORMError(i),i)},e.prototype.setValue=function(e,t,r,i,n){void 0!==n&&(n=String(n));var o=h.global.SCORM_FALSE;if(this.checkState(r,this._error_codes.STORE_BEFORE_INIT,this._error_codes.STORE_AFTER_TERM)){r&&(this.lastErrorCode="0");try{o=this.setCMIValue(i,n)}catch(e){this.handleValueAccessException(e,o)}this.processListeners(e,i,n)}return void 0===o&&(o=h.global.SCORM_FALSE),"0"===String(this.lastErrorCode)&&this.settings.autocommit&&!this._timeout&&this.scheduleCommit(1e3*this.settings.autocommitSeconds,t),this.apiLog(e,": "+n+": result: "+o,h.global.LOG_LEVEL_INFO,i),this.clearSCORMError(o),o},e.prototype.commit=function(e){return i(this,arguments,void 0,(function(e,t){var r,i;return void 0===t&&(t=!1),n(this,(function(n){switch(n.label){case 0:return this.clearScheduledCommit(),r=h.global.SCORM_FALSE,this.checkState(t,this._error_codes.COMMIT_BEFORE_INIT,this._error_codes.COMMIT_AFTER_TERM)?[4,this.storeData(!1)]:[3,2];case 1:(i=n.sent()).errorCode&&i.errorCode>0&&this.throwSCORMError(i.errorCode),r=void 0!==i&&i.result?i.result:h.global.SCORM_FALSE,this.apiLog(e," Result: "+r,h.global.LOG_LEVEL_DEBUG,"HttpRequest"),t&&(this.lastErrorCode="0"),this.processListeners(e),n.label=2;case 2:return this.apiLog(e,"returned: "+r,h.global.LOG_LEVEL_INFO),this.clearSCORMError(r),[2,r]}}))}))},e.prototype.getLastError=function(e){var t=String(this.lastErrorCode);return this.processListeners(e),this.apiLog(e,"returned: "+t,h.global.LOG_LEVEL_INFO),t},e.prototype.getErrorString=function(e,t){var r="";return null!==t&&""!==t&&(r=this.getLmsErrorMessageDetails(t),this.processListeners(e)),this.apiLog(e,"returned: "+r,h.global.LOG_LEVEL_INFO),r},e.prototype.getDiagnostic=function(e,t){var r="";return null!==t&&""!==t&&(r=this.getLmsErrorMessageDetails(t,!0),this.processListeners(e)),this.apiLog(e,"returned: "+r,h.global.LOG_LEVEL_INFO),r},e.prototype.checkState=function(e,t,r){return this.isNotInitialized()?(this.throwSCORMError(t),!1):!e||!this.isTerminated()||(this.throwSCORMError(r),!1)},e.prototype.getLmsErrorMessageDetails=function(e,t){throw void 0===t&&(t=!1),new Error("The getLmsErrorMessageDetails method has not been implemented")},e.prototype.getCMIValue=function(e){throw new Error("The getCMIValue method has not been implemented")},e.prototype.setCMIValue=function(e,t){throw new Error("The setCMIValue method has not been implemented")},e.prototype._commonSetCMIValue=function(e,t,i,n){if(!i||""===i)return h.global.SCORM_FALSE;for(var o=i.split("."),s=this,a=h.global.SCORM_FALSE,c=!1,l="The data model element passed to ".concat(e," (").concat(i,") is not a valid SCORM data model element."),u=t?this._error_codes.UNDEFINED_DATA_MODEL:this._error_codes.GENERAL,d=0;d<o.length;d++){var m=o[d];if(d===o.length-1)t&&"{target="===m.substring(0,8)?this.isInitialized()?this.throwSCORMError(this._error_codes.READ_ONLY_ELEMENT):s=r(r({},s),{attribute:n}):this._checkObjectHasProperty(s,m)?(I(i,"\\.correct_responses\\.\\d+")&&this.isInitialized()&&this.validateCorrectResponse(i,n),t&&"0"!==this.lastErrorCode||(s[m]=n,a=h.global.SCORM_TRUE)):this.throwSCORMError(u,l);else{if(!(s=s[m])){this.throwSCORMError(u,l);break}if(s instanceof y){var _=parseInt(o[d+1],10);if(!isNaN(_)){var f=s.childArray[_];if(f)s=f,c=!0;else{var p=this.getChildElement(i,n,c);c=!0,p?(s.initialized&&p.initialize(),s.childArray.push(p),s=p):this.throwSCORMError(u,l)}d++}}}}return a===h.global.SCORM_FALSE&&this.apiLog(e,"There was an error setting the value for: ".concat(i,", value of: ").concat(n),h.global.LOG_LEVEL_WARNING),a},e.prototype._commonGetCMIValue=function(e,t,r){if(!r||""===r)return"";for(var i=r.split("."),n=this,o=null,s="The data model element passed to ".concat(e," (").concat(r,") has not been initialized."),a="The data model element passed to ".concat(e," (").concat(r,") is not a valid SCORM data model element."),c=t?this._error_codes.UNDEFINED_DATA_MODEL:this._error_codes.GENERAL,u=0;u<i.length;u++){if(o=i[u],t){if("{target="===String(o).substring(0,8)&&"function"==typeof n._isTargetValid){var h=String(o).substring(8,String(o).length-9);return n._isTargetValid(h)}if(!this._checkObjectHasProperty(n,o))return void this.throwSCORMError(c,a)}else if(u===i.length-1&&!this._checkObjectHasProperty(n,o))return void this.throwSCORMError(c,a);if(void 0===(n=n[o])){this.throwSCORMError(c,a);break}if(n instanceof y){var d=parseInt(i[u+1],10);if(!isNaN(d)){var m=n.childArray[d];if(!m){this.throwSCORMError(this._error_codes.VALUE_NOT_INITIALIZED,s);break}n=m,u++}}}if(null!=n)return n;t||("_children"===o?this.throwSCORMError(l.scorm12.CHILDREN_ERROR):"_count"===o&&this.throwSCORMError(l.scorm12.COUNT_ERROR))},e.prototype.isInitialized=function(){return this.currentState===h.global.STATE_INITIALIZED},e.prototype.isNotInitialized=function(){return this.currentState===h.global.STATE_NOT_INITIALIZED},e.prototype.isTerminated=function(){return this.currentState===h.global.STATE_TERMINATED},e.prototype.on=function(e,t){if(t)for(var r=e.split(" "),i=0;i<r.length;i++){var n=r[i].split(".");if(0===n.length)return;var o=n[0],s=null;n.length>1&&(s=e.replace(o+".","")),this.listenerArray.push({functionName:o,CMIElement:s,callback:t}),this.apiLog("on","Added event listener: ".concat(this.listenerArray.length),h.global.LOG_LEVEL_INFO,o)}},e.prototype.off=function(e,t){if(t)for(var r=e.split(" "),i=function(i){var o=r[i].split(".");if(0===o.length)return{value:void 0};var s=o[0],a=null;o.length>1&&(a=e.replace(s+".",""));var c=n.listenerArray.findIndex((function(e){return e.functionName===s&&e.CMIElement===a&&e.callback===t}));-1!==c&&(n.listenerArray.splice(c,1),n.apiLog("off","Removed event listener: ".concat(n.listenerArray.length),h.global.LOG_LEVEL_INFO,s))},n=this,o=0;o<r.length;o++){var s=i(o);if("object"==typeof s)return s.value}},e.prototype.clear=function(e){for(var t=e.split(" "),r=function(r){var n=t[r].split(".");if(0===n.length)return{value:void 0};var o=n[0],s=null;n.length>1&&(s=e.replace(o+".","")),i.listenerArray=i.listenerArray.filter((function(e){return e.functionName!==o&&e.CMIElement!==s}))},i=this,n=0;n<t.length;n++){var o=r(n);if("object"==typeof o)return o.value}},e.prototype.processListeners=function(e,t,r){this.apiLog(e,r,h.global.LOG_LEVEL_INFO,t);for(var i=0;i<this.listenerArray.length;i++){var n,o=this.listenerArray[i],s=o.functionName===e,a=!!o.CMIElement;n=t&&o.CMIElement&&"*"===o.CMIElement.substring(o.CMIElement.length-1)?0===t.indexOf(o.CMIElement.substring(0,o.CMIElement.length-1)):o.CMIElement===t,!s||a&&!n||(this.apiLog("processListeners","Processing listener: ".concat(o.functionName),h.global.LOG_LEVEL_INFO,t),o.callback(t,r))}},e.prototype.throwSCORMError=function(e,t){t||(t=this.getLmsErrorMessageDetails(e)),this.apiLog("throwSCORMError",e+": "+t,h.global.LOG_LEVEL_ERROR),this.lastErrorCode=String(e)},e.prototype.clearSCORMError=function(e){void 0!==e&&e!==h.global.SCORM_FALSE&&(this.lastErrorCode="0")},e.prototype.loadFromFlattenedJSON=function(e,t){var r=this;if(t||(t=""),this.isNotInitialized()){var i,n=/^(cmi\.interactions\.)(\d+)\.(.*)$/,o=/^(cmi\.objectives\.)(\d+)\.(.*)$/,s=Object.keys(e).map((function(t){return[String(t),e[t]]}));s.sort((function(e,t){var r,i=e[0],s=(e[1],t[0]);return t[1],null!==(r=a(i,s,n))||null!==(r=a(i,s,o))?r:i<s?-1:i>s?1:0})),s.forEach((function(e){(i={})[e[0]]=e[1],r.loadFromJSON(function(e){if(Object(e)!==e||Array.isArray(e))return e;var t=/\.?([^.[\]]+)|\[(\d+)]/g,r={};for(var i in e)if({}.hasOwnProperty.call(e,i)){for(var n=r,o="",s=t.exec(i);s;)n=n[o]||(n[o]=s[2]?[]:{}),o=s[2]||s[1],s=t.exec(i);n[o]=e[i]}return r[""]||r}(i),t)}))}else console.error("loadFromFlattenedJSON can only be called before the call to lmsInitialize.");function a(e,t,r){var i,n=e.match(r);if(null!==n&&null!==(i=t.match(r))){var o=Number(n[2]),s=Number(i[2]);return o===s?"id"===n[3]?-1:"type"===n[3]?"id"===i[3]?1:-1:1:o-s}return null}},e.prototype.loadFromJSON=function(e,t){if(this.isNotInitialized()){for(var r in t=void 0!==t?t:"cmi",this.startingData=e,e)if({}.hasOwnProperty.call(e,r)&&e[r]){var i=(t?t+".":"")+r,n=e[r];if(n.childArray)for(var o=0;o<n.childArray.length;o++)this.loadFromJSON(n.childArray[o],i+"."+o);else n.constructor===Object?this.loadFromJSON(n,i):this.setCMIValue(i,n)}}else console.error("loadFromJSON can only be called before the call to lmsInitialize.")},e.prototype.renderCMIToJSONString=function(){var e=this.cmi;return this.settings.sendFullCommit?JSON.stringify({cmi:e}):JSON.stringify({cmi:e},(function(e,t){return void 0===t?null:t}),2)},e.prototype.renderCMIToJSONObject=function(){return JSON.parse(this.renderCMIToJSONString())},e.prototype.processHttpRequest=function(e,t){return i(this,arguments,void 0,(function(e,t,r){var o,s,a,c,l=this;return void 0===r&&(r=!1),n(this,(function(u){switch(u.label){case 0:return o=this,s={result:h.global.SCORM_FALSE,errorCode:this.error_codes.GENERAL},r?(this.performFetch(e,t).then((function(e){return i(l,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return[4,this.transformResponse(e)];case 1:return t.sent(),[2]}}))}))})),[2,{result:h.global.SCORM_TRUE,errorCode:0}]):(a=function(e,t,r){return i(l,void 0,void 0,(function(){var i,a;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=r.requestHandler(t),[4,this.performFetch(e,t)];case 1:return i=n.sent(),[2,this.transformResponse(i)];case 2:return a=n.sent(),this.apiLog("processHttpRequest",a,h.global.LOG_LEVEL_ERROR),o.processListeners("CommitError"),[2,s];case 3:return[2]}}))}))},this.settings.asyncCommit?(c=function(e,t,r){var i;return void 0===r&&(r=!1),function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=this,s=r&&!i;i&&clearTimeout(i),i=setTimeout((function(){i=null,r||e.apply(o,t)}),500),s&&e.apply(o,t)}}(a,0,r),c(e,t,this.settings),[2,{result:h.global.SCORM_TRUE,errorCode:0}]):[3,1]);case 1:return[4,a(e,t,this.settings)];case 2:return[2,u.sent()]}}))}))},e.prototype.scheduleCommit=function(e,t){this._timeout=new T(this,e,t),this.apiLog("scheduleCommit","scheduled",h.global.LOG_LEVEL_DEBUG,"")},e.prototype.clearScheduledCommit=function(){this._timeout&&(this._timeout.cancel(),this._timeout=void 0,this.apiLog("clearScheduledCommit","cleared",h.global.LOG_LEVEL_DEBUG,""))},e.prototype._checkObjectHasProperty=function(e,t){return Object.hasOwnProperty.call(e,t)||null!=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e),t)||t in e},e.prototype.handleValueAccessException=function(e,t){return e instanceof p?(this.lastErrorCode=String(e.errorCode),t=h.global.SCORM_FALSE):(e instanceof Error&&e.message?console.error(e.message):console.error(e),this.throwSCORMError(this._error_codes.GENERAL)),t},e.prototype.performFetch=function(e,t){return i(this,void 0,void 0,(function(){return n(this,(function(i){return[2,fetch(e,{method:"POST",body:t instanceof Array?t.join("&"):JSON.stringify(t),headers:r(r({},this.settings.xhrHeaders),{"Content-Type":this.settings.commitRequestDataType}),credentials:this.settings.xhrWithCredentials?"include":void 0,keepalive:!0})]}))}))},e.prototype.transformResponse=function(e){return i(this,void 0,void 0,(function(){var t,r;return n(this,(function(i){switch(i.label){case 0:return"function"!=typeof this.settings.responseHandler?[3,2]:[4,this.settings.responseHandler(e)];case 1:return r=i.sent(),[3,4];case 2:return[4,e.json()];case 3:r=i.sent(),i.label=4;case 4:return t=r,e.status>=200&&e.status<=299&&(!0===t.result||t.result===h.global.SCORM_TRUE)?this.processListeners("CommitSuccess"):this.processListeners("CommitError"),[2,t]}}))}))},e}(),C=w,L={CMIString256:"^.{0,255}$",CMIString4096:"^.{0,4096}$",CMITime:"^(?:[01]\\d|2[0123]):(?:[012345]\\d):(?:[012345]\\d)$",CMITimespan:"^([0-9]{2,}):([0-9]{2}):([0-9]{2})(.[0-9]{1,2})?$",CMIInteger:"^\\d+$",CMISInteger:"^-?([0-9]+)$",CMIDecimal:"^-?([0-9]{0,3})(.[0-9]*)?$",CMIIdentifier:"^[\\u0021-\\u007E\\s]{0,255}$",CMIFeedback:"^.{0,255}$",CMIIndex:"[._](\\d+).",CMIStatus:"^(passed|completed|failed|incomplete|browsed)$",CMIStatus2:"^(passed|completed|failed|incomplete|browsed|not attempted)$",CMIExit:"^(time-out|suspend|logout|)$",CMIType:"^(true-false|choice|fill-in|matching|performance|sequencing|likert|numeric)$",CMIResult:"^(correct|wrong|unanticipated|neutral|([0-9]{0,3})?(\\.[0-9]*)?)$",NAVEvent:"^(previous|continue)$",score_range:"0#100",audio_range:"-1#100",speed_range:"-100#100",weighting_range:"-100#100",text_range:"-1#1"},N=(r(r({},L),{CMIIdentifier:"^\\w{1,255}$"}),L),A={CMIString200:"^[\\u0000-\\uFFFF]{0,200}$",CMIString250:"^[\\u0000-\\uFFFF]{0,250}$",CMIString1000:"^[\\u0000-\\uFFFF]{0,1000}$",CMIString4000:"^[\\u0000-\\uFFFF]{0,4000}$",CMIString64000:"^[\\u0000-\\uFFFF]{0,64000}$",CMILang:"^([a-zA-Z]{2,3}|i|x)(-[a-zA-Z0-9-]{2,8})?$|^$",CMILangString250:"^({lang=([a-zA-Z]{2,3}|i|x)(-[a-zA-Z0-9-]{2,8})?})?((?!{.*$).{0,250}$)?$",CMILangcr:"^(({lang=([a-zA-Z]{2,3}|i|x)?(-[a-zA-Z0-9-]{2,8})?}))(.*?)$",CMILangString250cr:"^(({lang=([a-zA-Z]{2,3}|i|x)?(-[a-zA-Z0-9-]{2,8})?})?(.{0,250})?)?$",CMILangString4000:"^({lang=([a-zA-Z]{2,3}|i|x)(-[a-zA-Z0-9-]{2,8})?})?((?!{.*$).{0,4000}$)?$",CMITime:"^(19[7-9]{1}[0-9]{1}|20[0-2]{1}[0-9]{1}|203[0-8]{1})((-(0[1-9]{1}|1[0-2]{1}))((-(0[1-9]{1}|[1-2]{1}[0-9]{1}|3[0-1]{1}))(T([0-1]{1}[0-9]{1}|2[0-3]{1})((:[0-5]{1}[0-9]{1})((:[0-5]{1}[0-9]{1})((\\.[0-9]{1,2})((Z|([+|-]([0-1]{1}[0-9]{1}|2[0-3]{1})))(:[0-5]{1}[0-9]{1})?)?)?)?)?)?)?)?$",CMITimespan:"^P(?:([.,\\d]+)Y)?(?:([.,\\d]+)M)?(?:([.,\\d]+)W)?(?:([.,\\d]+)D)?(?:T?(?:([.,\\d]+)H)?(?:([.,\\d]+)M)?(?:([.,\\d]+)S)?)?$",CMIInteger:"^\\d+$",CMISInteger:"^-?([0-9]+)$",CMIDecimal:"^-?([0-9]{1,5})(\\.[0-9]{1,18})?$",CMIIdentifier:"^\\S{1,250}[a-zA-Z0-9]$",CMIShortIdentifier:"^[\\w\\.\\-\\_]{1,250}$",CMILongIdentifier:"^(?:(?!urn:)\\S{1,4000}|urn:[A-Za-z0-9-]{1,31}:\\S{1,4000}|.{1,4000})$",CMIFeedback:"^.*$",CMIIndex:"[._](\\d+).",CMIIndexStore:".N(\\d+).",CMICStatus:"^(completed|incomplete|not attempted|unknown)$",CMISStatus:"^(passed|failed|unknown)$",CMIExit:"^(time-out|suspend|logout|normal)$",CMIType:"^(true-false|choice|fill-in|long-fill-in|matching|performance|sequencing|likert|numeric|other)$",CMIResult:"^(correct|incorrect|unanticipated|neutral|-?([0-9]{1,4})(\\.[0-9]{1,18})?)$",NAVEvent:"^(previous|continue|exit|exitAll|abandon|abandonAll|suspendAll|_none_|(\\{target=\\S{0,}[a-zA-Z0-9-_]+})?choice|(\\{target=\\S{0,}[a-zA-Z0-9-_]+})?jump)$",NAVBoolean:"^(unknown|true|false$)",NAVTarget:"^{target=\\S{0,}[a-zA-Z0-9-_]+}$",scaled_range:"-1#1",audio_range:"0#*",speed_range:"0#*",text_range:"-1#1",progress_range:"0#1"};function R(e,t,r,i,n){if("string"!=typeof e)return!1;var o=new RegExp(t),s=e.match(o);if(n&&""===e)return!0;if(void 0===e||!s||""===s[0])throw new i(r);return!0}function x(e,t,r,i){var n=t.split("#");if((e*=1)>=n[0]){if("*"===n[1]||e<=n[1])return!0;throw new i(r)}throw new i(r)}function D(e,t,r){return R(e,t,l.scorm2004.TYPE_MISMATCH,g,r)}function j(e,t){return x(e,t,l.scorm2004.VALUE_OUT_OF_RANGE,g)}var P,F,k,V=function(e){function r(){var t=e.call(this)||this;return t.__children=h.scorm2004.student_preference_children,t._audio_level="1",t._language="",t._delivery_speed="1",t._audio_captioning="0",t}return t(r,e),Object.defineProperty(r.prototype,"_children",{get:function(){return this.__children},set:function(e){throw new g(l.scorm2004.READ_ONLY_ELEMENT)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"audio_level",{get:function(){return this._audio_level},set:function(e){D(e,A.CMIDecimal)&&j(e,A.audio_range)&&(this._audio_level=e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"language",{get:function(){return this._language},set:function(e){D(e,A.CMILang)&&(this._language=e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"delivery_speed",{get:function(){return this._delivery_speed},set:function(e){D(e,A.CMIDecimal)&&j(e,A.speed_range)&&(this._delivery_speed=e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"audio_captioning",{get:function(){return this._audio_captioning},set:function(e){D(e,A.CMISInteger)&&j(e,A.text_range)&&(this._audio_captioning=e)},enumerable:!1,configurable:!0}),r.prototype.toJSON=function(){this.jsonString=!0;var e={audio_level:this.audio_level,language:this.language,delivery_speed:this.delivery_speed,audio_captioning:this.audio_captioning};return delete this.jsonString,e},r}(s),z=A,G={"true-false":{format:"^true$|^false$",max:1,delimiter:"",unique:!1},choice:{format:z.CMILongIdentifier,max:36,delimiter:"[,]",unique:!0},"fill-in":{format:z.CMILangString250,max:10,delimiter:"[,]",unique:!1},"long-fill-in":{format:z.CMILangString4000,max:1,delimiter:"",unique:!1},matching:{format:z.CMIShortIdentifier,format2:z.CMIShortIdentifier,max:36,delimiter:"[,]",delimiter2:"[.]",unique:!1},performance:{format:"^$|"+z.CMIShortIdentifier,format2:z.CMIDecimal+"|^$|"+z.CMIShortIdentifier,max:250,delimiter:"[,]",delimiter2:"[.]",unique:!1},sequencing:{format:z.CMIShortIdentifier,max:36,delimiter:"[,]",unique:!1},likert:{format:z.CMIShortIdentifier,max:1,delimiter:"",unique:!1},numeric:{format:z.CMIDecimal,max:1,delimiter:"",unique:!1},other:{format:z.CMIString4000,max:1,delimiter:"",unique:!1}},U={"true-false":{max:1,delimiter:"",unique:!1,duplicate:!1,format:"^true$|^false$",limit:1},choice:{max:36,delimiter:"[,]",unique:!0,duplicate:!1,format:z.CMILongIdentifier},"fill-in":{max:10,delimiter:"[,]",unique:!1,duplicate:!1,format:z.CMILangString250cr},"long-fill-in":{max:1,delimiter:"",unique:!1,duplicate:!0,format:z.CMILangString4000},matching:{max:36,delimiter:"[,]",delimiter2:"[.]",unique:!1,duplicate:!1,format:z.CMIShortIdentifier,format2:z.CMIShortIdentifier},performance:{max:250,delimiter:"[,]",delimiter2:"[.]",delimiter3:"[:]",unique:!1,duplicate:!1,format:"^$|"+z.CMIShortIdentifier,format2:z.CMIDecimal+"|^$|"+z.CMIShortIdentifier},sequencing:{max:36,delimiter:"[,]",unique:!1,duplicate:!1,format:z.CMIShortIdentifier},likert:{max:1,delimiter:"",unique:!1,duplicate:!1,format:z.CMIShortIdentifier,limit:1},numeric:{max:2,delimiter:"[:]",unique:!1,duplicate:!1,format:z.CMIDecimal,limit:1},other:{max:1,delimiter:"",unique:!1,duplicate:!1,format:z.CMIString4000,limit:1}},Y=function(e){function r(){return e.call(this,{children:h.scorm2004.interactions_children,errorCode:l.scorm2004.READ_ONLY_ELEMENT,errorClass:g})||this}return t(r,e),r}(y),q=function(e){function r(){var t=e.call(this)||this;return t._id="",t._type="",t._timestamp="",t._weighting="",t._learner_response="",t._result="",t._latency="",t._description="",t.objectives=new y({errorCode:l.scorm2004.READ_ONLY_ELEMENT,errorClass:g,children:h.scorm2004.objectives_children}),t.correct_responses=new y({errorCode:l.scorm2004.READ_ONLY_ELEMENT,errorClass:g,children:h.scorm2004.correct_responses_children}),t}return t(r,e),r.prototype.initialize=function(){var t,r;e.prototype.initialize.call(this),null===(t=this.objectives)||void 0===t||t.initialize(),null===(r=this.correct_responses)||void 0===r||r.initialize()},Object.defineProperty(r.prototype,"id",{get:function(){return this._id},set:function(e){D(e,A.CMILongIdentifier)&&(this._id=e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"type",{get:function(){return this._type},set:function(e){if(this.initialized&&""===this._id)throw new g(l.scorm2004.DEPENDENCY_NOT_ESTABLISHED);D(e,A.CMIType)&&(this._type=e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"timestamp",{get:function(){return this._timestamp},set:function(e){if(this.initialized&&""===this._id)throw new g(l.scorm2004.DEPENDENCY_NOT_ESTABLISHED);D(e,A.CMITime)&&(this._timestamp=e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"weighting",{get:function(){return this._weighting},set:function(e){if(this.initialized&&""===this._id)throw new g(l.scorm2004.DEPENDENCY_NOT_ESTABLISHED);D(e,A.CMIDecimal)&&(this._weighting=e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"learner_response",{get:function(){return this._learner_response},set:function(e){if(this.initialized&&(""===this._type||""===this._id))throw new g(l.scorm2004.DEPENDENCY_NOT_ESTABLISHED);var t=[],r=G[this.type];if(!r)throw new g(l.scorm2004.TYPE_MISMATCH);if((null==r?void 0:r.delimiter)?t=e.split(r.delimiter):t[0]=e,!(t.length>0&&t.length<=r.max))throw new g(l.scorm2004.GENERAL_SET_FAILURE);for(var i=new RegExp(r.format),n=0;n<t.length;n++)if(null==r?void 0:r.delimiter2){var o=t[n].split(r.delimiter2);if(2!==o.length)throw new g(l.scorm2004.TYPE_MISMATCH);if(!o[0].match(i))throw new g(l.scorm2004.TYPE_MISMATCH);if(!r.format2||!o[1].match(new RegExp(r.format2)))throw new g(l.scorm2004.TYPE_MISMATCH)}else{if(!t[n].match(i))throw new g(l.scorm2004.TYPE_MISMATCH);if(""!==t[n]&&r.unique)for(var s=0;s<n;s++)if(t[n]===t[s])throw new g(l.scorm2004.TYPE_MISMATCH)}this._learner_response=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"result",{get:function(){return this._result},set:function(e){D(e,A.CMIResult)&&(this._result=e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"latency",{get:function(){return this._latency},set:function(e){if(this.initialized&&""===this._id)throw new g(l.scorm2004.DEPENDENCY_NOT_ESTABLISHED);D(e,A.CMITimespan)&&(this._latency=e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"description",{get:function(){return this._description},set:function(e){if(this.initialized&&""===this._id)throw new g(l.scorm2004.DEPENDENCY_NOT_ESTABLISHED);D(e,A.CMILangString250,!0)&&(this._description=e)},enumerable:!1,configurable:!0}),r.prototype.toJSON=function(){this.jsonString=!0;var e={id:this.id,type:this.type,objectives:this.objectives,timestamp:this.timestamp,weighting:this.weighting,learner_response:this.learner_response,result:this.result,latency:this.latency,description:this.description,correct_responses:this.correct_responses};return delete this.jsonString,e},r}(s),$=function(e){function r(){var t=e.call(this)||this;return t._id="",t}return t(r,e),Object.defineProperty(r.prototype,"id",{get:function(){return this._id},set:function(e){D(e,A.CMILongIdentifier)&&(this._id=e)},enumerable:!1,configurable:!0}),r.prototype.toJSON=function(){this.jsonString=!0;var e={id:this.id};return delete this.jsonString,e},r}(s),H=function(e){function r(){var t=e.call(this)||this;return t._pattern="",t}return t(r,e),Object.defineProperty(r.prototype,"pattern",{get:function(){return this._pattern},set:function(e){D(e,A.CMIFeedback)&&(this._pattern=e)},enumerable:!1,configurable:!0}),r.prototype.toJSON=function(){this.jsonString=!0;var e={pattern:this.pattern};return delete this.jsonString,e},r}(s),B=h.scorm12,Z=N,J=l.scorm12,W=function(e){function r(){var t=e.call(this,{score_children:h.scorm2004.score_children,max:"",invalidErrorCode:l.scorm2004.READ_ONLY_ELEMENT,invalidTypeCode:l.scorm2004.TYPE_MISMATCH,invalidRangeCode:l.scorm2004.VALUE_OUT_OF_RANGE,decimalRegex:A.CMIDecimal,errorClass:g})||this;return t._scaled="",t}return t(r,e),Object.defineProperty(r.prototype,"scaled",{get:function(){return this._scaled},set:function(e){D(e,A.CMIDecimal)&&j(e,A.scaled_range)&&(this._scaled=e)},enumerable:!1,configurable:!0}),r.prototype.toJSON=function(){this.jsonString=!0;var e={scaled:this.scaled,raw:this.raw,min:this.min,max:this.max};return delete this.jsonString,e},r}(function(e){function r(t){var r=e.call(this)||this;return r._raw="",r._min="",r.__children=t.score_children||B.score_children,r.__score_range=!!t.score_range&&Z.score_range,r._max=t.max||""===t.max?t.max:"100",r.__invalid_error_code=t.invalidErrorCode||J.INVALID_SET_VALUE,r.__invalid_type_code=t.invalidTypeCode||J.TYPE_MISMATCH,r.__invalid_range_code=t.invalidRangeCode||J.VALUE_OUT_OF_RANGE,r.__decimal_regex=t.decimalRegex||Z.CMIDecimal,r.__error_class=t.errorClass,r}return t(r,e),Object.defineProperty(r.prototype,"_children",{get:function(){return this.__children},set:function(e){throw new this.__error_class(this.__invalid_error_code)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"raw",{get:function(){return this._raw},set:function(e){!R(e,this.__decimal_regex,this.__invalid_type_code,this.__error_class)||this.__score_range&&!x(e,this.__score_range,this.__invalid_range_code,this.__error_class)||(this._raw=e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"min",{get:function(){return this._min},set:function(e){!R(e,this.__decimal_regex,this.__invalid_type_code,this.__error_class)||this.__score_range&&!x(e,this.__score_range,this.__invalid_range_code,this.__error_class)||(this._min=e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"max",{get:function(){return this._max},set:function(e){!R(e,this.__decimal_regex,this.__invalid_type_code,this.__error_class)||this.__score_range&&!x(e,this.__score_range,this.__invalid_range_code,this.__error_class)||(this._max=e)},enumerable:!1,configurable:!0}),r.prototype.toJSON=function(){this.jsonString=!0;var e={raw:this.raw,min:this.min,max:this.max};return delete this.jsonString,e},r}(s)),X=function(e){function r(){return e.call(this,{children:h.scorm2004.comments_children,errorCode:l.scorm2004.READ_ONLY_ELEMENT,errorClass:g})||this}return t(r,e),r}(y),Q=function(e){function r(){return e.call(this,{children:h.scorm2004.comments_children,errorCode:l.scorm2004.READ_ONLY_ELEMENT,errorClass:g})||this}return t(r,e),r}(y),K=function(e){function r(t){void 0===t&&(t=!1);var r=e.call(this)||this;return r._comment="",r._location="",r._timestamp="",r._comment="",r._location="",r._timestamp="",r._readOnlyAfterInit=t,r}return t(r,e),Object.defineProperty(r.prototype,"comment",{get:function(){return this._comment},set:function(e){if(this.initialized&&this._readOnlyAfterInit)throw new g(l.scorm2004.READ_ONLY_ELEMENT);D(e,A.CMILangString4000,!0)&&(this._comment=e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"location",{get:function(){return this._location},set:function(e){if(this.initialized&&this._readOnlyAfterInit)throw new g(l.scorm2004.READ_ONLY_ELEMENT);D(e,A.CMIString250)&&(this._location=e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"timestamp",{get:function(){return this._timestamp},set:function(e){if(this.initialized&&this._readOnlyAfterInit)throw new g(l.scorm2004.READ_ONLY_ELEMENT);D(e,A.CMITime)&&(this._timestamp=e)},enumerable:!1,configurable:!0}),r.prototype.toJSON=function(){this.jsonString=!0;var e={comment:this.comment,location:this.location,timestamp:this.timestamp};return delete this.jsonString,e},r}(s),ee=function(e){function r(){return e.call(this,{children:h.scorm2004.objectives_children,errorCode:l.scorm2004.READ_ONLY_ELEMENT,errorClass:g})||this}return t(r,e),r}(y),te=function(e){function r(){var t=e.call(this)||this;return t._id="",t._success_status="unknown",t._completion_status="unknown",t._progress_measure="",t._description="",t.score=new W,t}return t(r,e),r.prototype.initialize=function(){var t;e.prototype.initialize.call(this),null===(t=this.score)||void 0===t||t.initialize()},Object.defineProperty(r.prototype,"id",{get:function(){return this._id},set:function(e){D(e,A.CMILongIdentifier)&&(this._id=e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"success_status",{get:function(){return this._success_status},set:function(e){if(this.initialized&&""===this._id)throw new g(l.scorm2004.DEPENDENCY_NOT_ESTABLISHED);D(e,A.CMISStatus)&&(this._success_status=e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"completion_status",{get:function(){return this._completion_status},set:function(e){if(this.initialized&&""===this._id)throw new g(l.scorm2004.DEPENDENCY_NOT_ESTABLISHED);D(e,A.CMICStatus)&&(this._completion_status=e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"progress_measure",{get:function(){return this._progress_measure},set:function(e){if(this.initialized&&""===this._id)throw new g(l.scorm2004.DEPENDENCY_NOT_ESTABLISHED);D(e,A.CMIDecimal)&&j(e,A.progress_range)&&(this._progress_measure=e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"description",{get:function(){return this._description},set:function(e){if(this.initialized&&""===this._id)throw new g(l.scorm2004.DEPENDENCY_NOT_ESTABLISHED);D(e,A.CMILangString250,!0)&&(this._description=e)},enumerable:!1,configurable:!0}),r.prototype.toJSON=function(){this.jsonString=!0;var e={id:this.id,success_status:this.success_status,completion_status:this.completion_status,progress_measure:this.progress_measure,description:this.description,score:this.score};return delete this.jsonString,e},r}(s),re=function(e){function r(t){void 0===t&&(t=!1);var r=e.call(this)||this;return r.__version="1.0",r.__children=h.scorm2004.cmi_children,r._completion_status="unknown",r._completion_threshold="",r._credit="credit",r._entry="",r._exit="",r._launch_data="",r._learner_id="",r._learner_name="",r._location="",r._max_time_allowed="",r._mode="normal",r._progress_measure="",r._scaled_passing_score="",r._session_time="PT0H0M0S",r._success_status="unknown",r._suspend_data="",r._time_limit_action="continue,no message",r._total_time="",r.learner_preference=new V,r.score=new W,r.comments_from_learner=new Q,r.comments_from_lms=new X,r.interactions=new Y,r.objectives=new ee,t&&r.initialize(),r}return t(r,e),r.prototype.initialize=function(){var t,r,i,n,o,s;e.prototype.initialize.call(this),null===(t=this.learner_preference)||void 0===t||t.initialize(),null===(r=this.score)||void 0===r||r.initialize(),null===(i=this.comments_from_learner)||void 0===i||i.initialize(),null===(n=this.comments_from_lms)||void 0===n||n.initialize(),null===(o=this.interactions)||void 0===o||o.initialize(),null===(s=this.objectives)||void 0===s||s.initialize()},Object.defineProperty(r.prototype,"_version",{get:function(){return this.__version},set:function(e){throw new g(l.scorm2004.READ_ONLY_ELEMENT)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"_children",{get:function(){return this.__children},set:function(e){throw new g(l.scorm2004.READ_ONLY_ELEMENT)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"completion_status",{get:function(){return this._completion_status},set:function(e){D(e,A.CMICStatus)&&(this._completion_status=e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"completion_threshold",{get:function(){return this._completion_threshold},set:function(e){if(this.initialized)throw new g(l.scorm2004.READ_ONLY_ELEMENT);this._completion_threshold=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"credit",{get:function(){return this._credit},set:function(e){if(this.initialized)throw new g(l.scorm2004.READ_ONLY_ELEMENT);this._credit=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"entry",{get:function(){return this._entry},set:function(e){if(this.initialized)throw new g(l.scorm2004.READ_ONLY_ELEMENT);this._entry=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"exit",{get:function(){if(!this.jsonString)throw new g(l.scorm2004.WRITE_ONLY_ELEMENT);return this._exit},set:function(e){D(e,A.CMIExit,!0)&&(this._exit=e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"launch_data",{get:function(){return this._launch_data},set:function(e){if(this.initialized)throw new g(l.scorm2004.READ_ONLY_ELEMENT);this._launch_data=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"learner_id",{get:function(){return this._learner_id},set:function(e){if(this.initialized)throw new g(l.scorm2004.READ_ONLY_ELEMENT);this._learner_id=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"learner_name",{get:function(){return this._learner_name},set:function(e){if(this.initialized)throw new g(l.scorm2004.READ_ONLY_ELEMENT);this._learner_name=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"location",{get:function(){return this._location},set:function(e){D(e,A.CMIString1000)&&(this._location=e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"max_time_allowed",{get:function(){return this._max_time_allowed},set:function(e){if(this.initialized)throw new g(l.scorm2004.READ_ONLY_ELEMENT);this._max_time_allowed=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mode",{get:function(){return this._mode},set:function(e){if(this.initialized)throw new g(l.scorm2004.READ_ONLY_ELEMENT);this._mode=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"progress_measure",{get:function(){return this._progress_measure},set:function(e){D(e,A.CMIDecimal)&&j(e,A.progress_range)&&(this._progress_measure=e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"scaled_passing_score",{get:function(){return this._scaled_passing_score},set:function(e){if(this.initialized)throw new g(l.scorm2004.READ_ONLY_ELEMENT);this._scaled_passing_score=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"session_time",{get:function(){if(!this.jsonString)throw new g(l.scorm2004.WRITE_ONLY_ELEMENT);return this._session_time},set:function(e){D(e,A.CMITimespan)&&(this._session_time=e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"success_status",{get:function(){return this._success_status},set:function(e){D(e,A.CMISStatus)&&(this._success_status=e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"suspend_data",{get:function(){return this._suspend_data},set:function(e){D(e,A.CMIString64000,!0)&&(this._suspend_data=e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"time_limit_action",{get:function(){return this._time_limit_action},set:function(e){if(this.initialized)throw new g(l.scorm2004.READ_ONLY_ELEMENT);this._time_limit_action=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"total_time",{get:function(){return this._total_time},set:function(e){if(this.initialized)throw new g(l.scorm2004.READ_ONLY_ELEMENT);this._total_time=e},enumerable:!1,configurable:!0}),r.prototype.getCurrentTotalTime=function(){var e=this._session_time,t=this.start_time;return null!=t&&(e=v(((new Date).getTime()-t)/1e3)),function(e,t,r){var i="string"==typeof r?new RegExp(r):r;return v(M(e,i)+M(t,i))}(this._total_time,e,A.CMITimespan)},r.prototype.toJSON=function(){this.jsonString=!0;var e={comments_from_learner:this.comments_from_learner,comments_from_lms:this.comments_from_lms,completion_status:this.completion_status,completion_threshold:this.completion_threshold,credit:this.credit,entry:this.entry,exit:this.exit,interactions:this.interactions,launch_data:this.launch_data,learner_id:this.learner_id,learner_name:this.learner_name,learner_preference:this.learner_preference,location:this.location,max_time_allowed:this.max_time_allowed,mode:this.mode,objectives:this.objectives,progress_measure:this.progress_measure,scaled_passing_score:this.scaled_passing_score,score:this.score,session_time:this.session_time,success_status:this.success_status,suspend_data:this.suspend_data,time_limit_action:this.time_limit_action};return delete this.jsonString,e},r}(a),ie=["aa","ab","ae","af","ak","am","an","ar","as","av","ay","az","ba","be","bg","bh","bi","bm","bn","bo","br","bs","ca","ce","ch","co","cr","cs","cu","cv","cy","da","de","dv","dz","ee","el","en","eo","es","et","eu","fa","ff","fi","fj","fo","fr","fy","ga","gd","gl","gn","gu","gv","ha","he","hi","ho","hr","ht","hu","hy","hz","ia","id","ie","ig","ii","ik","io","is","it","iu","ja","jv","ka","kg","ki","kj","kk","kl","km","kn","ko","kr","ks","ku","kv","kw","ky","la","lb","lg","li","ln","lo","lt","lu","lv","mg","mh","mi","mk","ml","mn","mo","mr","ms","mt","my","na","nb","nd","ne","ng","nl","nn","no","nr","nv","ny","oc","oj","om","or","os","pa","pi","pl","ps","pt","qu","rm","rn","ro","ru","rw","sa","sc","sd","se","sg","sh","si","sk","sl","sm","sn","so","sq","sr","ss","st","su","sv","sw","ta","te","tg","th","ti","tk","tl","tn","to","tr","ts","tt","tw","ty","ug","uk","ur","uz","ve","vi","vo","wa","wo","xh","yi","yo","za","zh","zu","aar","abk","ave","afr","aka","amh","arg","ara","asm","ava","aym","aze","bak","bel","bul","bih","bis","bam","ben","tib","bod","bre","bos","cat","che","cha","cos","cre","cze","ces","chu","chv","wel","cym","dan","ger","deu","div","dzo","ewe","gre","ell","eng","epo","spa","est","baq","eus","per","fas","ful","fin","fij","fao","fre","fra","fry","gle","gla","glg","grn","guj","glv","hau","heb","hin","hmo","hrv","hat","hun","arm","hye","her","ina","ind","ile","ibo","iii","ipk","ido","ice","isl","ita","iku","jpn","jav","geo","kat","kon","kik","kua","kaz","kal","khm","kan","kor","kau","kas","kur","kom","cor","kir","lat","ltz","lug","lim","lin","lao","lit","lub","lav","mlg","mah","mao","mri","mac","mkd","mal","mon","mol","mar","may","msa","mlt","bur","mya","nau","nob","nde","nep","ndo","dut","nld","nno","nor","nbl","nav","nya","oci","oji","orm","ori","oss","pan","pli","pol","pus","por","que","roh","run","rum","ron","rus","kin","san","srd","snd","sme","sag","slo","sin","slk","slv","smo","sna","som","alb","sqi","srp","ssw","sot","sun","swe","swa","tam","tel","tgk","tha","tir","tuk","tgl","tsn","ton","tur","tso","tat","twi","tah","uig","ukr","urd","uzb","ven","vie","vol","wln","wol","xho","yid","yor","zha","chi","zho","zul"];!function(e){e.unknown="unknown",e.true="true",e.false="false"}(P||(P={})),function(e){e.passed="passed",e.failed="failed",e.unknown="unknown"}(F||(F={})),function(e){e.completed="completed",e.incomplete="incomplete",e.unknown="unknown"}(k||(k={}));var ne=function(e){function r(){var t=e.call(this)||this;return t.nav=new oe,t}return t(r,e),r.prototype.initialize=function(){var t;e.prototype.initialize.call(this),null===(t=this.nav)||void 0===t||t.initialize()},r.prototype.toJSON=function(){this.jsonString=!0;var e={nav:this.nav};return delete this.jsonString,e},r}(s),oe=function(e){function r(){var t=e.call(this)||this;return t._request="_none_",t.request_valid=new se,t}return t(r,e),r.prototype.initialize=function(){var t;e.prototype.initialize.call(this),null===(t=this.request_valid)||void 0===t||t.initialize()},Object.defineProperty(r.prototype,"request",{get:function(){return this._request},set:function(e){D(e,A.NAVEvent)&&(this._request=e)},enumerable:!1,configurable:!0}),r.prototype.toJSON=function(){this.jsonString=!0;var e={request:this.request};return delete this.jsonString,e},r}(s),se=function(e){function r(){var t=e.call(this)||this;return t._continue="unknown",t._previous="unknown",t._choice={},t._jump={},t}return t(r,e),Object.defineProperty(r.prototype,"continue",{get:function(){return this._continue},set:function(e){if(this.initialized)throw new g(l.scorm2004.READ_ONLY_ELEMENT);D(e,A.NAVBoolean)&&(this._continue=e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"previous",{get:function(){return this._previous},set:function(e){if(this.initialized)throw new g(l.scorm2004.READ_ONLY_ELEMENT);D(e,A.NAVBoolean)&&(this._previous=e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"choice",{get:function(){return this._choice},set:function(e){if(this.initialized)throw new g(l.scorm2004.READ_ONLY_ELEMENT);if("object"!=typeof e)throw new g(l.scorm2004.TYPE_MISMATCH);for(var t in e)({}).hasOwnProperty.call(e,t)&&D(e[t],A.NAVBoolean)&&D(t,A.NAVTarget)&&(this._choice[t]=P[e[t]])},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"jump",{get:function(){return this._jump},set:function(e){if(this.initialized)throw new g(l.scorm2004.READ_ONLY_ELEMENT);if("object"!=typeof e)throw new g(l.scorm2004.TYPE_MISMATCH);for(var t in e)({}).hasOwnProperty.call(e,t)&&D(e[t],A.NAVBoolean)&&D(t,A.NAVTarget)&&(this._jump[t]=P[e[t]])},enumerable:!1,configurable:!0}),r.prototype.toJSON=function(){this.jsonString=!0;var e={previous:this._previous,continue:this._continue,choice:this._choice,jump:this._jump};return delete this.jsonString,e},r}(s),ae=function(e){function r(t){var r=this;return t&&void 0===t.mastery_override&&(t.mastery_override=!1),(r=e.call(this,l.scorm2004,t)||this)._version="1.0",r.cmi=new re,r.adl=new ne,r.Initialize=r.lmsInitialize,r.Terminate=r.lmsFinish,r.GetValue=r.lmsGetValue,r.SetValue=r.lmsSetValue,r.Commit=r.lmsCommit,r.GetLastError=r.lmsGetLastError,r.GetErrorString=r.lmsGetErrorString,r.GetDiagnostic=r.lmsGetDiagnostic,r}return t(r,e),r.prototype.reset=function(e){this.commonReset(e),this.cmi=new re,this.adl=new ne},Object.defineProperty(r.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),r.prototype.lmsInitialize=function(){return this.cmi.initialize(),this.initialize("Initialize")},r.prototype.lmsFinish=function(){return i(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return[4,this.internalFinish()];case 1:return e.sent(),[2]}}))})),h.global.SCORM_TRUE},r.prototype.internalFinish=function(){return i(this,void 0,void 0,(function(){var e,t,r,i,o,s,a;return n(this,(function(n){switch(n.label){case 0:return[4,this.terminate("Terminate",!0)];case 1:return(e=n.sent())===h.global.SCORM_TRUE&&("_none_"!==this.adl.nav.request?(t={continue:"SequenceNext",previous:"SequencePrevious",choice:"SequenceChoice",jump:"SequenceJump",exit:"SequenceExit",exitAll:"SequenceExitAll",abandon:"SequenceAbandon",abandonAll:"SequenceAbandonAll"},r=this.adl.nav.request,i=new RegExp(A.NAVEvent),o=r.match(i),s="",o&&o.length>2&&(s=o[2],r=o[1].replace(s,"")),(a=t[r])&&this.processListeners(a,"adl.nav.request",s)):this.settings.autoProgress&&this.processListeners("SequenceNext")),[2,e]}}))}))},r.prototype.lmsGetValue=function(e){var t="^adl\\.nav\\.request_valid\\.(choice|jump)\\.{target=\\S{0,}([a-zA-Z0-9-_]+)}$";if(I(e,t)){var r=e.match(t),i=r[1],n=r[2].replace("{target=","").replace("}","");if("choice"===i||"jump"===i)return this.settings.scoItemIdValidator?String(this.settings.scoItemIdValidator(n)):String(this.settings.scoItemIds.includes(n))}return this.getValue("GetValue",!0,e)},r.prototype.lmsSetValue=function(e,t){return this.setValue("SetValue","Commit",!0,e,t)},r.prototype.lmsCommit=function(){return i(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return[4,this.commit("Commit")];case 1:return e.sent(),[2]}}))})),h.global.SCORM_TRUE},r.prototype.lmsGetLastError=function(){return this.getLastError("GetLastError")},r.prototype.lmsGetErrorString=function(e){return this.getErrorString("GetErrorString",e)},r.prototype.lmsGetDiagnostic=function(e){return this.getDiagnostic("GetDiagnostic",e)},r.prototype.setCMIValue=function(e,t){return this._commonSetCMIValue("SetValue",!0,e,t)},r.prototype.getChildElement=function(e,t,r){if(I(e,"cmi\\.objectives\\.\\d+"))return new te;if(r){if(I(e,"cmi\\.interactions\\.\\d+\\.correct_responses\\.\\d+"))return this.createCorrectResponsesObject(e,t);if(I(e,"cmi\\.interactions\\.\\d+\\.objectives\\.\\d+"))return new $}else if(I(e,"cmi\\.interactions\\.\\d+"))return new q;return I(e,"cmi\\.comments_from_learner\\.\\d+")?new K:I(e,"cmi\\.comments_from_lms\\.\\d+")?new K(!0):null},r.prototype.createCorrectResponsesObject=function(e,t){var r=e.split("."),i=Number(r[2]),n=this.cmi.interactions.childArray[i];if(this.isInitialized())if(n.type){this.checkDuplicateChoiceResponse(n,t);var o=U[n.type];o?this.checkValidResponseType(o,t,n.type):this.throwSCORMError(l.scorm2004.GENERAL_SET_FAILURE,"Incorrect Response Type: "+n.type)}else this.throwSCORMError(l.scorm2004.DEPENDENCY_NOT_ESTABLISHED);return"0"===this.lastErrorCode?new H:null},r.prototype.checkValidResponseType=function(e,t,r){var i=[];(null==e?void 0:e.delimiter)?i=String(t).split(e.delimiter):i[0]=t,i.length>0&&i.length<=e.max?this.checkCorrectResponseValue(r,i,t):i.length>e.max&&this.throwSCORMError(l.scorm2004.GENERAL_SET_FAILURE,"Data Model Element Pattern Too Long")},r.prototype.checkDuplicateChoiceResponse=function(e,t){var r=e.correct_responses._count;if("choice"===e.type)for(var i=0;i<r&&"0"===this.lastErrorCode;i++)e.correct_responses.childArray[i].pattern===t&&this.throwSCORMError(l.scorm2004.GENERAL_SET_FAILURE)},r.prototype.validateCorrectResponse=function(e,t){var r=e.split("."),i=Number(r[2]),n=Number(r[4]),o=this.cmi.interactions.childArray[i],s=o.correct_responses._count;this.checkDuplicateChoiceResponse(o,t);var a=U[o.type];void 0===a.limit||s<=a.limit?(this.checkValidResponseType(a,t,o.type),"0"===this.lastErrorCode&&(!a.duplicate||!this.checkDuplicatedPattern(o.correct_responses,n,t))||"0"===this.lastErrorCode&&""===t||"0"===this.lastErrorCode&&this.throwSCORMError(l.scorm2004.GENERAL_SET_FAILURE,"Data Model Element Pattern Already Exists")):this.throwSCORMError(l.scorm2004.GENERAL_SET_FAILURE,"Data Model Element Collection Limit Reached")},r.prototype.getCMIValue=function(e){return this._commonGetCMIValue("GetValue",!0,e)},r.prototype.getLmsErrorMessageDetails=function(e,t){var r="",i="";return e=String(e),h.scorm2004.error_descriptions[e]&&(r=h.scorm2004.error_descriptions[e].basicMessage,i=h.scorm2004.error_descriptions[e].detailMessage),t?i:r},r.prototype.checkDuplicatedPattern=function(e,t,r){for(var i=!1,n=e._count,o=0;o<n&&!i;o++)o!==t&&e.childArray[o]===r&&(i=!0);return i},r.prototype.checkCorrectResponseValue=function(e,t,r){for(var i=U[e],n=new RegExp(i.format),o=0;o<t.length&&"0"===this.lastErrorCode;o++)if(e.match("^(fill-in|long-fill-in|matching|performance|sequencing)$")&&(t[o]=this.removeCorrectResponsePrefixes(t[o])),null==i?void 0:i.delimiter2){var s=t[o].split(i.delimiter2);2===s.length&&(a=s[0].match(n))&&i.format2&&s[1].match(new RegExp(i.format2))||this.throwSCORMError(l.scorm2004.TYPE_MISMATCH)}else{var a;if(!(a=t[o].match(n))&&""!==r||!a&&"true-false"===e)this.throwSCORMError(l.scorm2004.TYPE_MISMATCH);else if("numeric"===e&&t.length>1)Number(t[0])>Number(t[1])&&this.throwSCORMError(l.scorm2004.TYPE_MISMATCH);else if(""!==t[o]&&i.unique)for(var c=0;c<o&&"0"===this.lastErrorCode;c++)t[o]===t[c]&&this.throwSCORMError(l.scorm2004.TYPE_MISMATCH)}},r.prototype.removeCorrectResponsePrefixes=function(e){for(var t=!1,r=!1,i=!1,n=new RegExp("^({(lang|case_matters|order_matters)=([^}]+)})"),o=e.match(n),s=null;o;){switch(o[2]){case"lang":if(s=e.match(A.CMILangcr)){var a=s[3];void 0!==a&&a.length>0&&(ie.includes(a.toLowerCase())||this.throwSCORMError(l.scorm2004.TYPE_MISMATCH))}i=!0;break;case"case_matters":i||t||r||"true"!==o[3]&&"false"!==o[3]&&this.throwSCORMError(l.scorm2004.TYPE_MISMATCH),r=!0;break;case"order_matters":r||i||t||"true"!==o[3]&&"false"!==o[3]&&this.throwSCORMError(l.scorm2004.TYPE_MISMATCH),t=!0}o=(e=e.substring(o[1].length)).match(n)}return e},r.prototype.replaceWithAnotherScormAPI=function(e){this.cmi=e.cmi,this.adl=e.adl},r.prototype.renderCommitCMI=function(e){var t=this.renderCMIToJSONObject();e&&(t.cmi.total_time=this.cmi.getCurrentTotalTime());var r=[],i=S(t);switch(this.settings.dataCommitFormat){case"flattened":return S(t);case"params":for(var n in i)({}).hasOwnProperty.call(i,n)&&r.push("".concat(n,"=").concat(i[n]));return r;default:return t}},r.prototype.renderCommitObject=function(e){var t=this.renderCommitCMI(e),r=M(this.cmi.getCurrentTotalTime(),A.CMITimespan),i=k.unknown,n=F.unknown;this.cmi.completion_status&&("completed"===this.cmi.completion_status?i=k.completed:"incomplete"===this.cmi.completion_status&&(i=k.incomplete)),this.cmi.success_status&&("passed"===this.cmi.success_status?n=F.passed:"failed"===this.cmi.success_status&&(n=F.failed));var o=this.cmi.score,s=null;o&&(s={},Number.isNaN(Number.parseFloat(o.raw))||(s.raw=Number.parseFloat(o.raw)),Number.isNaN(Number.parseFloat(o.min))||(s.min=Number.parseFloat(o.min)),Number.isNaN(Number.parseFloat(o.max))||(s.max=Number.parseFloat(o.max)),Number.isNaN(Number.parseFloat(o.scaled))||(s.scaled=Number.parseFloat(o.scaled)));var a={completionStatus:i,successStatus:n,totalTimeSeconds:r,runtimeData:t};return s&&(a.score=s),a},r.prototype.storeData=function(e){return i(this,void 0,void 0,(function(){var t,r,i,o,s,a,c;return n(this,(function(n){switch(n.label){case 0:return e&&"normal"===this.cmi.mode&&"credit"===this.cmi.credit&&(this.cmi.completion_threshold&&this.cmi.progress_measure&&(this.cmi.progress_measure>=this.cmi.completion_threshold?this.cmi.completion_status="completed":this.cmi.completion_status="incomplete"),this.cmi.scaled_passing_score&&this.cmi.score.scaled&&(this.cmi.score.scaled>=this.cmi.scaled_passing_score?this.cmi.success_status="passed":this.cmi.success_status="failed")),t=!1,this.adl.nav.request!==(null===(c=null===(a=null===(s=this.startingData)||void 0===s?void 0:s.adl)||void 0===a?void 0:a.nav)||void 0===c?void 0:c.request)&&"_none_"!==this.adl.nav.request&&(this.adl.nav.request=encodeURIComponent(this.adl.nav.request),t=!0),r=e||this.settings.alwaysSendTotalTime,i=this.settings.renderCommonCommitFields?this.renderCommitObject(r):this.renderCommitCMI(r),this.apiLogLevel===h.global.LOG_LEVEL_DEBUG&&(console.debug("Commit (terminated: "+(e?"yes":"no")+"): "),console.debug(i)),"string"!=typeof this.settings.lmsCommitUrl?[3,2]:[4,this.processHttpRequest(this.settings.lmsCommitUrl,i,e)];case 1:return o=n.sent(),t&&void 0!==o.navRequest&&""!==o.navRequest&&Function('"use strict";(() => { '.concat(o.navRequest," })()"))(),[2,o];case 2:return[2,{result:h.global.SCORM_TRUE,errorCode:0}]}}))}))},r}(C);window.Scorm2004API=ae}();var r=i(155);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return(t=function(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(){u=function(){return t};var e,t={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},s="function"==typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function h(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,r){return e[t]=r}}function d(e,t,r,i){var o=t&&t.prototype instanceof y?t:y,s=Object.create(o.prototype),a=new R(i||[]);return n(s,"_invoke",{value:C(e,r,a)}),s}function m(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var _="suspendedStart",f="suspendedYield",p="executing",g="completed",E={};function y(){}function b(){}function v(){}var M={};h(M,a,(function(){return this}));var S=Object.getPrototypeOf,I=S&&S(S(x([])));I&&I!==r&&i.call(I,a)&&(M=I);var O=v.prototype=y.prototype=Object.create(M);function T(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(n,s,a,c){var l=m(e[n],e,s);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==o(h)&&i.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(h).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,c)}))}c(l.arg)}var s;n(this,"_invoke",{value:function(e,i){function n(){return new t((function(t,n){r(e,i,t,n)}))}return s=s?s.then(n,n):n()}})}function C(t,r,i){var n=_;return function(o,s){if(n===p)throw Error("Generator is already running");if(n===g){if("throw"===o)throw s;return{value:e,done:!0}}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var c=L(a,i);if(c){if(c===E)continue;return c}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===_)throw n=g,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=p;var l=m(t,r,i);if("normal"===l.type){if(n=i.done?g:f,l.arg===E)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(n=g,i.method="throw",i.arg=l.arg)}}}function L(t,r){var i=r.method,n=t.iterator[i];if(n===e)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=e,L(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),E;var o=m(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,E;var s=o.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,E):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,E)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function x(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,s=function r(){for(;++n<t.length;)if(i.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}throw new TypeError(o(t)+" is not iterable")}return b.prototype=v,n(O,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:b,configurable:!0}),b.displayName=h(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,h(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},T(w.prototype),h(w.prototype,c,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,i,n,o){void 0===o&&(o=Promise);var s=new w(d(e,r,i,n),o);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},T(O),h(O,l,"Generator"),h(O,a,(function(){return this})),h(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var i in t)r.push(i);return r.reverse(),function e(){for(;r.length;){var i=r.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=x,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(i,n){return a.type="throw",a.arg=t,r.next=i,n&&(r.method="next",r.arg=e),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var c=i.call(s,"catchLoc"),l=i.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,E):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var i=r.completion;if("throw"===i.type){var n=i.arg;A(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(t,r,i){return this.delegate={iterator:x(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=e),E}},t}function h(e,t,r,i,n,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(i,n)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(i,n){var o=e.apply(t,r);function s(e){h(o,i,n,s,a,"next",e)}function a(e){h(o,i,n,s,a,"throw",e)}s(void 0)}))}}var m={container:{width:"100%",height:"100%",border:"none",overflow:"hidden"},iframe:{width:"100%",height:"100%",border:"none"},loading:{width:"100%",height:"4px",position:"relative",overflow:"hidden"},loadingBar:{width:"50%",height:"100%",backgroundColor:"#60a5fa",position:"absolute",animation:"loading 1.5s infinite ease-in-out"}},_=function(){var e=d(u().mark((function e(r){var i,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(r);case 2:return i=e.sent,e.next=5,i.text();case 5:return n=e.sent,e.abrupt("return",(o=n,(new(t())).xml2js(o)));case 7:case"end":return e.stop()}var o}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(e,t){var r,i=null==t||null===(r=t.manifest)||void 0===r||null===(r=r.resources)||void 0===r||null===(r=r.resource)||void 0===r||null===(r=r.file)||void 0===r||null===(r=r[0])||void 0===r?void 0:r._href;if(i)return"".concat(e.replace("imsmanifest.xml","")).concat(i.replace("./",""))},p={loading:!0,moduleUrl:void 0,sessionData:{}};function g(e,t){switch(t.type){case"SET_LOADING":return c(c({},e),{},{loading:t.payload});case"SET_MODULE_URL":return c(c({},e),{},{moduleUrl:t.payload});case"SET_SESSION_DATA":return c(c({},e),{},{sessionData:c(c({},e.sessionData),t.payload)});default:return e}}var E=function(e){var t,i,n=e.sessionData,o=e.manifestUrl,a=e.className,h=e.onCommit,E=e.onFinish,y=e.onInitialize,b=e.onSetValue,v=e.onComplete,M=(t=(0,r.useReducer)(g,p),i=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,s,a=[],c=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=o.call(r)).done)&&(a.push(i.value),a.length!==t);c=!0);}catch(e){l=!0,n=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw n}}return a}}(t,i)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),S=M[0],I=M[1];(0,r.useEffect)((function(){window.API_1484_11=new window.Scorm2004API({logLevel:1});var e=window.API_1484_11;if(n)try{e.loadFromJSON(n)}catch(e){console.error("REACT SCORM PLAYER: couldn't load session data",e)}e.on("Initialize",null==y?void 0:y()),e.on("SetValue",(function(e,t){null==b||b(e,t),"cmi.completion_status"===e&&"completed"===t&&(null==v||v()),I({type:"SET_SESSION_DATA",payload:l({},e.replace("cmi.",""),t)})})),e.on("Commit",null==h?void 0:h()),e.on("Terminate",null==E?void 0:E())}),[n]),(0,r.useEffect)((function(){O()}),[]);var O=function(){var e=d(u().mark((function e(){var t,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(o);case 2:t=e.sent,r=f(o,t),I({type:"SET_MODULE_URL",payload:r});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return React.createElement("div",{style:c(c({},m.container),a&&{className:a})},S.loading&&React.createElement("div",{style:m.loading},React.createElement("div",{style:m.loadingBar})),!S.loading&&React.createElement("iframe",{src:moduleUrl,allowFullScreen:!0,style:m.iframe,onLoad:function(){return I({type:"SET_LOADING",payload:!1})}}))};const y=E})(),n})()));